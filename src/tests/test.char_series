/////////////////////
version="version test.char_series";
category="Commutative Algebra";
info="
";

LIB "primdec.lib";
LIB "ehv.lib";
LIB "randomideal.lib";
 

proc testCharSeries( getRng, idealG, trials, lo )
{
    int warnIsSet = optionIsSet("warn");
    if (defined(basering) ) {   def BAS=basering; }

    def rng = getRng( );
    setring rng;
    option(warn);
      
    short = 0;

    bigint trial;
    lo.clear();

    while( trial<trials )
    {  

       option(nowarn);  
       kill rng;      
       def rng = getRng( );
       setring rng;
       ideal cs,  I;

      if (warnIsSet)
      {
        option(warn);
      }
       lo.clear();
       lo.write("LIB(\"primdec.lib\");");
       lo.write("LIB(\"randomideal.lib\");");
       lo.write("ring rng = "+string(basering)+";");
       lo.write("bigint trial = "+string(trial)+";");
       ///dbprint( 1, "trial: ", trial );
       I = idealG( );
       lo.write("ideal I = "+string( I )+";");
       lo.write( "printIdealInfo( I ) ;");
       lo.write( idealInfoString(I) ) ;
       lo.write("ideal cs = char_series(I);");
       //lo.write("quit;");
       cs = char_series(I);
       trial = trial+1;
       //ASSUME(0, 0);
    }

    if ( defined(BAS) ) {  setring BAS; }
    return(1);
}


